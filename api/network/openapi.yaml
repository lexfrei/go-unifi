openapi: 3.0.3
info:
  title: UniFi Network API
  version: 1.0.0
  description: |
    UniFi Network API provides programmatic access to UniFi network devices, clients, DNS, and configurations
    running on local UniFi controllers.

    This is the Local Application API, accessed through the UniFi controller at `/proxy/network/`.

    ## Authentication
    All requests require an API key passed via the X-API-KEY header.

    ## API Versions
    - **Integration API (v1)**: `/proxy/network/integration/v1` - Sites, Devices, Clients
    - **DNS API (v2)**: `/proxy/network/v2/api/site/{site}/static-dns` - Static DNS records

    ## Important: Site Identifiers
    Different API versions use different site identifiers:

    - **Integration API v1** uses `siteId` (UUID format):
      - Example: `88f7af54-98f8-306a-a1c7-c9349722b1f6`
      - This is the `id` field from the site object

    - **DNS API v2** uses `site` (internal reference string):
      - Example: `default`
      - This is the `internalReference` field from the site object
      - **Does NOT accept UUIDs** - using UUID will return "Site does not exist"

    To get both identifiers, call `GET /integration/v1/sites` which returns:
    ```json
    {
      "id": "88f7af54-98f8-306a-a1c7-c9349722b1f6",
      "internalReference": "default",
      "name": "Default"
    }
    ```

    ## Features
    - Site management and listing
    - Device inventory and monitoring
    - Client tracking and access control
    - Guest hotspot voucher management
    - Static DNS record management
    - Firewall policy management
    - Traffic rule configuration
    - Real-time status information and analytics

  contact:
    name: Aleksei Sviridkin
    email: f@lex.la
  license:
    name: BSD-3-Clause
    url: https://opensource.org/licenses/BSD-3-Clause

servers:
  - url: https://{controller}/proxy/network
    description: Local UniFi controller
    variables:
      controller:
        default: unifi.local
        description: Hostname or IP address of your UniFi controller (e.g., unifi.local, 192.168.1.1)

security:
  - ApiKeyAuth: []

tags:
  - name: Sites
    description: Site management and listing operations
  - name: Devices
    description: Network device management and monitoring
  - name: Clients
    description: Client device tracking and access control
  - name: Hotspot
    description: Guest hotspot voucher management
  - name: DNS
    description: Static DNS record management
  - name: Firewall
    description: Firewall policy management and configuration
  - name: Traffic
    description: Traffic rule and routing management
  - name: Analytics
    description: Dashboard statistics and monitoring data

paths:
  /integration/v1/sites:
    get:
      summary: List all sites
      description: |
        Retrieves a paginated list of all UniFi sites configured on the controller.

        Each site represents a logical grouping of network devices and clients.
      operationId: listSites
      tags:
        - Sites
      parameters:
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Limit'
      responses:
        '200':
          description: Successful response with list of sites
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SitesResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /integration/v1/sites/{siteId}/devices:
    get:
      summary: List devices for a site
      description: |
        Retrieves a paginated list of all network devices (routers, switches, access points)
        associated with the specified site.
      operationId: listSiteDevices
      tags:
        - Devices
      parameters:
        - $ref: '#/components/parameters/SiteId'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Limit'
      responses:
        '200':
          description: Successful response with list of devices
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DevicesResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /integration/v1/sites/{siteId}/devices/{deviceId}:
    get:
      summary: Get device details
      description: |
        Retrieves detailed information about a specific network device, including:
        - Hardware specifications and model
        - Firmware version and update status
        - Network interfaces (ports, radios)
        - Operational state and statistics
        - Configuration details
      operationId: getDeviceById
      tags:
        - Devices
      parameters:
        - $ref: '#/components/parameters/SiteId'
        - $ref: '#/components/parameters/DeviceId'
      responses:
        '200':
          description: Successful response with device details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Device'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /integration/v1/sites/{siteId}/clients:
    get:
      summary: List clients for a site
      description: |
        Retrieves a paginated list of all client devices (computers, phones, IoT devices)
        currently or recently connected to the specified site.
      operationId: listSiteClients
      tags:
        - Clients
      parameters:
        - $ref: '#/components/parameters/SiteId'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Limit'
      responses:
        '200':
          description: Successful response with list of clients
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientsResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /integration/v1/sites/{siteId}/clients/{clientId}:
    get:
      summary: Get client details
      description: |
        Retrieves detailed information about a specific client device, including:
        - Connection type (wired/wireless)
        - Network addresses (IP, MAC)
        - Uplink device information
        - Access control settings
        - Connection timestamps
      operationId: getClientById
      tags:
        - Clients
      parameters:
        - $ref: '#/components/parameters/SiteId'
        - $ref: '#/components/parameters/ClientId'
      responses:
        '200':
          description: Successful response with client details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NetworkClient'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /integration/v1/sites/{siteId}/hotspot/vouchers:
    get:
      summary: List hotspot vouchers
      description: |
        Retrieves a paginated list of all hotspot guest vouchers for the specified site.

        Hotspot vouchers provide temporary network access to guests without requiring credentials.
      operationId: listHotspotVouchers
      tags:
        - Hotspot
      parameters:
        - $ref: '#/components/parameters/SiteId'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Limit'
      responses:
        '200':
          description: Successful response with list of vouchers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HotspotVouchersResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      summary: Create hotspot vouchers
      description: |
        Creates one or more hotspot guest vouchers for temporary network access.

        Vouchers can be customized with duration, bandwidth limits, and usage restrictions.
      operationId: createHotspotVouchers
      tags:
        - Hotspot
      parameters:
        - $ref: '#/components/parameters/SiteId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateVouchersRequest'
      responses:
        '200':
          description: Successful response with created vouchers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HotspotVouchersResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /integration/v1/sites/{siteId}/hotspot/vouchers/{voucherId}:
    get:
      summary: Get hotspot voucher by ID
      description: Retrieves detailed information for a specific hotspot voucher.
      operationId: getHotspotVoucher
      tags:
        - Hotspot
      parameters:
        - $ref: '#/components/parameters/SiteId'
        - name: voucherId
          in: path
          required: true
          description: Unique identifier of the voucher
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Successful response with voucher details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HotspotVoucher'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      summary: Delete hotspot voucher
      description: Permanently deletes a hotspot voucher, revoking guest access.
      operationId: deleteHotspotVoucher
      tags:
        - Hotspot
      parameters:
        - $ref: '#/components/parameters/SiteId'
        - name: voucherId
          in: path
          required: true
          description: Unique identifier of the voucher to delete
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Voucher successfully deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # DNS API (v2)
  /v2/api/site/{site}/static-dns:
    get:
      summary: List DNS records
      description: |
        Retrieves all static DNS records configured for the specified site.

        Supports all standard DNS record types: A, AAAA, CNAME, MX, NS, SRV, TXT.
      operationId: listDNSRecords
      tags:
        - DNS
      parameters:
        - $ref: '#/components/parameters/Site'
      responses:
        '200':
          description: Successful response with list of DNS records
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DNSRecord'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

    post:
      summary: Create DNS record
      description: |
        Creates a new static DNS record for the specified site.

        For SRV records, provide priority, weight, and port fields.
      operationId: createDNSRecord
      tags:
        - DNS
      parameters:
        - $ref: '#/components/parameters/Site'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DNSRecordInput'
      responses:
        '200':
          description: Successfully created DNS record
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DNSRecord'
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /v2/api/site/{site}/static-dns/{recordId}:
    get:
      summary: Get DNS record by ID
      description: Retrieves details of a specific DNS record
      operationId: getDNSRecordById
      tags:
        - DNS
      parameters:
        - $ref: '#/components/parameters/Site'
        - $ref: '#/components/parameters/RecordId'
      responses:
        '200':
          description: Successful response with DNS record details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DNSRecord'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

    put:
      summary: Update DNS record
      description: Updates an existing DNS record
      operationId: updateDNSRecord
      tags:
        - DNS
      parameters:
        - $ref: '#/components/parameters/Site'
        - $ref: '#/components/parameters/RecordId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DNSRecordInput'
      responses:
        '200':
          description: Successfully updated DNS record
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DNSRecord'
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

    delete:
      summary: Delete DNS record
      description: Deletes a DNS record from the site
      operationId: deleteDNSRecord
      tags:
        - DNS
      parameters:
        - $ref: '#/components/parameters/Site'
        - $ref: '#/components/parameters/RecordId'
      responses:
        '204':
          description: Successfully deleted DNS record
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # Firewall API (v2)
  /v2/api/site/{site}/firewall-policies:
    get:
      summary: List firewall policies
      description: |
        Retrieves all firewall policies configured for the specified site.

        Includes both predefined and custom policies.
      operationId: listFirewallPolicies
      tags:
        - Firewall
      parameters:
        - $ref: '#/components/parameters/Site'
      responses:
        '200':
          description: Successful response with list of firewall policies
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FirewallPolicy'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      summary: Create firewall policy
      description: |
        Creates a new firewall policy for the specified site.

        Requires source, destination, schedule, and IP version configuration.
      operationId: createFirewallPolicy
      tags:
        - Firewall
      parameters:
        - $ref: '#/components/parameters/Site'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FirewallPolicyInput'
      responses:
        '200':
          description: Successfully created firewall policy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FirewallPolicy'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /v2/api/site/{site}/firewall-policies/{policyId}:
    put:
      summary: Update firewall policy
      description: |
        Updates an existing firewall policy.

        Note: You cannot update predefined policies - only custom ones you created.
      operationId: updateFirewallPolicy
      tags:
        - Firewall
      parameters:
        - $ref: '#/components/parameters/Site'
        - $ref: '#/components/parameters/PolicyId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FirewallPolicyInput'
      responses:
        '200':
          description: Successfully updated firewall policy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FirewallPolicy'
        '400':
          description: Invalid input or cannot update predefined policy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      summary: Delete firewall policy
      description: |
        Permanently deletes a firewall policy.

        Note: You cannot delete predefined policies - only custom ones you created.
      operationId: deleteFirewallPolicy
      tags:
        - Firewall
      parameters:
        - $ref: '#/components/parameters/Site'
        - $ref: '#/components/parameters/PolicyId'
      responses:
        '200':
          description: Successfully deleted firewall policy
        '400':
          description: Cannot delete predefined policy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # Traffic Rules API (v2)
  /v2/api/site/{site}/trafficrules:
    get:
      summary: List traffic rules
      description: |
        Retrieves all traffic rules configured for the specified site.

        Traffic rules control bandwidth, blocking, and routing for specific applications or devices.
      operationId: listTrafficRules
      tags:
        - Traffic
      parameters:
        - $ref: '#/components/parameters/Site'
      responses:
        '200':
          description: Successful response with list of traffic rules
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TrafficRule'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      summary: Create traffic rule
      description: |
        Creates a new traffic rule for the specified site.

        Requires matching target, action, and target devices configuration.
      operationId: createTrafficRule
      tags:
        - Traffic
      parameters:
        - $ref: '#/components/parameters/Site'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TrafficRuleInput'
      responses:
        '200':
          description: Successfully created traffic rule
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TrafficRule'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /v2/api/site/{site}/trafficrules/{ruleId}:
    put:
      summary: Update traffic rule
      description: Updates an existing traffic rule configuration
      operationId: updateTrafficRule
      tags:
        - Traffic
      parameters:
        - $ref: '#/components/parameters/Site'
        - $ref: '#/components/parameters/RuleId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TrafficRuleInput'
      responses:
        '200':
          description: Successfully updated traffic rule
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TrafficRule'
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      summary: Delete traffic rule
      description: Permanently deletes a traffic rule
      operationId: deleteTrafficRule
      tags:
        - Traffic
      parameters:
        - $ref: '#/components/parameters/Site'
        - $ref: '#/components/parameters/RuleId'
      responses:
        '200':
          description: Successfully deleted traffic rule
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # Analytics API (v2)
  /v2/api/site/{site}/aggregated-dashboard:
    get:
      summary: Get aggregated dashboard statistics
      description: |
        Retrieves comprehensive dashboard statistics including:
        - Most active clients
        - WiFi channel usage
        - WiFi technology distribution
        - Most active access points
        - WAN activity
        - Internet health history

        This is a read-only analytics endpoint.
      operationId: getAggregatedDashboard
      tags:
        - Analytics
      parameters:
        - $ref: '#/components/parameters/Site'
        - name: historySeconds
          in: query
          description: Number of seconds of history to include (default 86400 = 24 hours)
          required: false
          schema:
            type: integer
            default: 86400
            example: 86400
      responses:
        '200':
          description: Successful response with dashboard statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AggregatedDashboard'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-KEY
      description: API key generated from UniFi controller (Settings > Control Plane > Integrations)

  parameters:
    SiteId:
      name: siteId
      in: path
      required: true
      description: |
        The unique identifier of the site in UUID format (Integration API v1).
        This is the `id` field from the site object.
        Use `GET /integration/v1/sites` to get site UUIDs.
      schema:
        type: string
        format: uuid
      example: 88f7af54-98f8-306a-a1c7-c9349722b1f6

    DeviceId:
      name: deviceId
      in: path
      required: true
      description: The unique identifier of the device (UUID format)
      schema:
        type: string
        format: uuid
      example: 71cb254a-b068-39f9-9138-0fbf8fe11cac

    ClientId:
      name: clientId
      in: path
      required: true
      description: The unique identifier of the client (UUID format)
      schema:
        type: string
        format: uuid
      example: f95a0eb4-ddf9-3f41-942c-1793ac30d4c9

    Offset:
      name: offset
      in: query
      description: Number of items to skip before starting to return results (for pagination)
      required: false
      schema:
        type: integer
        minimum: 0
        default: 0
      example: 0

    Limit:
      name: limit
      in: query
      description: Maximum number of items to return per page
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 25
      example: 25

    Site:
      name: site
      in: path
      required: true
      description: |
        The site internal reference string (DNS API v2).
        This is the `internalReference` field from the site object.
        **Important**: DNS API does NOT accept UUIDs - use internal reference only.
        Common value: `default`
        Use `GET /integration/v1/sites` to get site internal references.
      schema:
        type: string
      example: default

    RecordId:
      name: recordId
      in: path
      required: true
      description: The unique identifier of the DNS record
      schema:
        type: string
      example: 68e04e991056cd46ea9edcd4

    PolicyId:
      name: policyId
      in: path
      required: true
      description: The unique identifier of the firewall policy
      schema:
        type: string
      example: 68a496708e604379be63f81368a496708e604379be63f8132147483647

    RuleId:
      name: ruleId
      in: path
      required: true
      description: The unique identifier of the traffic rule
      schema:
        type: string
      example: 507f1f77bcf86cd799439011

  responses:
    Unauthorized:
      description: Unauthorized - Invalid or missing API key
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            statusCode: 401
            statusName: UNAUTHORIZED
            message: Invalid API key
            timestamp: "2025-11-11T16:00:00Z"
            requestPath: /integration/v1/sites

    NotFound:
      description: Not Found - Resource or endpoint does not exist
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            statusCode: 404
            statusName: NOT_FOUND
            message: "No endpoint GET /integration/v1/sites/invalid-id"
            timestamp: "2025-11-11T16:00:00Z"
            requestPath: /integration/v1/sites/invalid-id

    BadRequest:
      description: Bad Request - Invalid or malformed request data
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            statusCode: 400
            statusName: BAD_REQUEST
            message: "Invalid request: count must be between 1 and 1000"
            timestamp: "2025-11-11T16:00:00Z"
            requestPath: /integration/v1/sites/88f7af54-98f8-306a-a1c7-c9349722b1f6/hotspot/vouchers

  schemas:
    # Base response types
    PaginatedResponse:
      type: object
      required:
        - offset
        - limit
        - count
        - totalCount
        - data
      properties:
        offset:
          type: integer
          description: Number of items skipped
          example: 0
        limit:
          type: integer
          description: Maximum number of items per page
          example: 25
        count:
          type: integer
          description: Number of items in current response
          example: 1
        totalCount:
          type: integer
          description: Total number of items available
          example: 1

    ErrorResponse:
      type: object
      required:
        - statusCode
        - statusName
        - message
        - timestamp
        - requestPath
      properties:
        statusCode:
          type: integer
          description: HTTP status code
          example: 404
        statusName:
          type: string
          description: HTTP status name
          example: NOT_FOUND
        message:
          type: string
          description: Human-readable error message
          example: "No endpoint GET /integration/v1/sites/invalid-id"
        timestamp:
          type: string
          format: date-time
          description: Timestamp when the error occurred (RFC3339 format)
          example: "2025-11-11T16:00:00Z"
        requestPath:
          type: string
          description: The request path that caused the error
          example: /integration/v1/sites/invalid-id

    # Sites
    SitesResponse:
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/SiteListItem'

    SiteListItem:
      type: object
      required:
        - id
        - internalReference
        - name
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for the site
          example: 88f7af54-98f8-306a-a1c7-c9349722b1f6
        internalReference:
          type: string
          description: Internal reference name used in UniFi controller URLs
          example: default
        name:
          type: string
          description: Display name of the site
          example: Default

    # Devices
    DevicesResponse:
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/DeviceListItem'

    DeviceListItem:
      type: object
      required:
        - id
        - name
        - model
        - macAddress
        - ipAddress
        - state
        - features
        - interfaces
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for the device
          example: 71cb254a-b068-39f9-9138-0fbf8fe11cac
        name:
          type: string
          description: Display name of the device
          example: LexFrei's home
        model:
          type: string
          description: Device model identifier
          example: UDR7
        macAddress:
          type: string
          description: MAC address of the device
          example: "94:2a:6f:ce:26:52"
        ipAddress:
          type: string
          description: IP address of the device
          example: 217.78.182.161
        state:
          type: string
          description: Current operational state
          enum:
            - ONLINE
            - OFFLINE
            - UPGRADING
            - PROVISIONING
          example: ONLINE
        features:
          type: array
          description: List of features supported by this device
          items:
            type: string
            enum:
              - switching
              - accessPoint
              - routing
              - gateway
          example:
            - switching
            - accessPoint
        interfaces:
          type: array
          description: Types of network interfaces available
          items:
            type: string
            enum:
              - ports
              - radios
              - wan
          example:
            - ports
            - radios

    Device:
      type: object
      required:
        - id
        - name
        - model
        - supported
        - macAddress
        - ipAddress
        - state
        - firmwareVersion
        - firmwareUpdatable
        - provisionedAt
        - configurationId
        - features
        - interfaces
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for the device
          example: 71cb254a-b068-39f9-9138-0fbf8fe11cac
        name:
          type: string
          description: Display name of the device
          example: LexFrei's home
        model:
          type: string
          description: Device model identifier
          example: UDR7
        supported:
          type: boolean
          description: Whether this device is officially supported
          example: true
        macAddress:
          type: string
          description: MAC address of the device
          example: "94:2a:6f:ce:26:52"
        ipAddress:
          type: string
          description: IP address of the device
          example: 217.78.182.161
        state:
          type: string
          description: Current operational state
          enum:
            - ONLINE
            - OFFLINE
            - UPGRADING
            - PROVISIONING
          example: ONLINE
        firmwareVersion:
          type: string
          description: Current firmware version
          example: 4.3.9
        firmwareUpdatable:
          type: boolean
          description: Whether firmware update is available
          example: false
        provisionedAt:
          type: string
          format: date-time
          description: Timestamp when device was provisioned (RFC3339 format)
          example: "2025-11-03T21:41:04Z"
        configurationId:
          type: string
          description: Current configuration identifier
          example: c212be130585ee93
        features:
          type: object
          description: Feature-specific configuration and capabilities
          additionalProperties:
            type: object
          example:
            switching: {}
            accessPoint: {}
        interfaces:
          $ref: '#/components/schemas/DeviceInterfaces'

    DeviceInterfaces:
      type: object
      description: Network interfaces available on the device
      properties:
        ports:
          type: array
          description: Physical ethernet ports
          items:
            $ref: '#/components/schemas/Port'
        radios:
          type: array
          description: Wireless radio interfaces
          items:
            $ref: '#/components/schemas/Radio'

    Port:
      type: object
      required:
        - idx
        - state
        - connector
        - maxSpeedMbps
        - speedMbps
      properties:
        idx:
          type: integer
          description: Port index number (1-based)
          example: 1
        state:
          type: string
          description: Current port state
          enum:
            - UP
            - DOWN
          example: UP
        connector:
          type: string
          description: Physical connector type
          enum:
            - RJ45
            - SFPPLUS
            - SFP
          example: RJ45
        maxSpeedMbps:
          type: integer
          description: Maximum supported speed in Mbps
          example: 2500
        speedMbps:
          type: integer
          description: Current negotiated speed in Mbps
          example: 1000
        poe:
          $ref: '#/components/schemas/PoE'

    PoE:
      type: object
      description: Power over Ethernet configuration and status
      required:
        - standard
        - type
        - enabled
        - state
      properties:
        standard:
          type: string
          description: PoE standard supported
          enum:
            - 802.3af
            - 802.3at
            - 802.3bt
          example: 802.3af
        type:
          type: integer
          description: PoE type number
          example: 1
        enabled:
          type: boolean
          description: Whether PoE is enabled on this port
          example: true
        state:
          type: string
          description: Current PoE state
          enum:
            - UP
            - DOWN
            - DISABLED
          example: UP

    Radio:
      type: object
      required:
        - wlanStandard
        - frequencyGHz
        - channelWidthMHz
        - channel
      properties:
        wlanStandard:
          type: string
          description: WiFi standard supported
          enum:
            - 802.11a
            - 802.11b
            - 802.11g
            - 802.11n
            - 802.11ac
            - 802.11ax
            - 802.11be
          example: 802.11be
        frequencyGHz:
          type: number
          format: float
          description: Operating frequency in GHz
          enum:
            - 2.4
            - 5
            - 6
          example: 2.4
        channelWidthMHz:
          type: integer
          description: Channel width in MHz
          enum:
            - 20
            - 40
            - 80
            - 160
          example: 20
        channel:
          type: integer
          description: WiFi channel number
          example: 6

    # Clients
    ClientsResponse:
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/ClientListItem'

    ClientListItem:
      type: object
      required:
        - type
        - id
        - name
        - connectedAt
        - ipAddress
        - macAddress
        - uplinkDeviceId
        - access
      properties:
        type:
          type: string
          description: Connection type
          enum:
            - WIRED
            - WIRELESS
          example: WIRED
        id:
          type: string
          format: uuid
          description: Unique identifier for the client
          example: f95a0eb4-ddf9-3f41-942c-1793ac30d4c9
        name:
          type: string
          description: Display name or hostname of the client
          example: truenas 05:8d
        connectedAt:
          type: string
          format: date-time
          description: Timestamp when client connected (RFC3339 format)
          example: "2025-10-19T10:09:31Z"
        ipAddress:
          type: string
          description: IP address assigned to the client
          example: 172.16.10.19
        macAddress:
          type: string
          description: MAC address of the client
          example: "80:af:ca:ad:05:8d"
        uplinkDeviceId:
          type: string
          format: uuid
          description: ID of the device this client is connected to
          example: 71cb254a-b068-39f9-9138-0fbf8fe11cac
        access:
          $ref: '#/components/schemas/ClientAccess'

    NetworkClient:
      allOf:
        - $ref: '#/components/schemas/ClientListItem'

    ClientAccess:
      type: object
      required:
        - type
      properties:
        type:
          type: string
          description: Access control type
          enum:
            - DEFAULT
            - RESTRICTED
            - BLOCKED
          example: DEFAULT

    # Hotspot Vouchers
    HotspotVouchersResponse:
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/HotspotVoucher'

    HotspotVoucher:
      type: object
      required:
        - _id
        - code
        - create_time
      properties:
        _id:
          type: string
          format: uuid
          description: Unique identifier for the voucher
          example: 68e04e991056cd46ea9edcd4
        code:
          type: string
          description: The voucher code that guests use to access the network
          example: 12345-67890
        duration:
          type: integer
          description: Validity period in minutes (0 = unlimited)
          example: 480
        quota:
          type: integer
          description: Maximum number of times the voucher can be used (0 = unlimited)
          example: 1
        note:
          type: string
          description: Optional note or description for the voucher
          example: Guest WiFi for conference room A
        create_time:
          type: integer
          description: Unix timestamp when voucher was created
          example: 1709654400
        used:
          type: integer
          description: Number of times the voucher has been used
          example: 0
        status:
          type: string
          description: Current status of the voucher
          enum:
            - VALID_ONE
            - VALID_MULTI
            - USED
            - EXPIRED
          example: VALID_ONE
        qos_overwrite:
          type: boolean
          description: Whether custom bandwidth limits are applied
          example: true
        qos_rate_max_down:
          type: integer
          description: Maximum download speed in Kbps (0 = unlimited)
          example: 10000
        qos_rate_max_up:
          type: integer
          description: Maximum upload speed in Kbps (0 = unlimited)
          example: 5000
        site_id:
          type: string
          format: uuid
          description: The site this voucher belongs to
          example: 88f7af54-98f8-306a-a1c7-c9349722b1f6

    CreateVouchersRequest:
      type: object
      required:
        - count
      properties:
        count:
          type: integer
          description: Number of vouchers to create
          minimum: 1
          maximum: 1000
          example: 10
        duration:
          type: integer
          description: Validity period in minutes (default = 1440, 0 = unlimited)
          minimum: 0
          example: 480
        quota:
          type: integer
          description: Maximum uses per voucher (default = 1, 0 = unlimited)
          minimum: 0
          example: 1
        note:
          type: string
          description: Optional note for all created vouchers
          example: Conference guest WiFi
        qos_overwrite:
          type: boolean
          description: Whether to apply custom bandwidth limits
          example: true
        qos_rate_max_down:
          type: integer
          description: Maximum download speed in Kbps (0 = unlimited)
          minimum: 0
          example: 10000
        qos_rate_max_up:
          type: integer
          description: Maximum upload speed in Kbps (0 = unlimited)
          minimum: 0
          example: 5000
        up:
          type: integer
          description: Upload bandwidth limit in Kbps (legacy, use qos_rate_max_up)
          minimum: 0
          example: 5000
        down:
          type: integer
          description: Download bandwidth limit in Kbps (legacy, use qos_rate_max_down)
          minimum: 0
          example: 10000
        bytes:
          type: integer
          description: Total data quota in MB (0 = unlimited)
          minimum: 0
          example: 1024

    # DNS Records
    DNSRecord:
      type: object
      required:
        - _id
        - enabled
        - key
        - record_type
        - value
      properties:
        _id:
          type: string
          description: Unique identifier for the DNS record
          example: 68e04e991056cd46ea9edcd4
        enabled:
          type: boolean
          description: Whether the DNS record is enabled
          example: true
        key:
          type: string
          description: DNS record name (hostname or domain)
          example: "*.home.lex.la"
        record_type:
          type: string
          description: DNS record type
          enum:
            - A
            - AAAA
            - CNAME
            - MX
            - NS
            - SRV
            - TXT
          example: A
        value:
          type: string
          description: DNS record value (IP address, target hostname, etc.)
          example: 172.16.100.250
        ttl:
          type: integer
          description: Time to live in seconds (0 = default)
          default: 0
          example: 0
        priority:
          type: integer
          description: Priority for MX and SRV records
          example: 0
        weight:
          type: integer
          description: Weight for SRV records
          example: 0
        port:
          type: integer
          description: Port number for SRV records
          example: 0

    DNSRecordInput:
      type: object
      required:
        - key
        - record_type
        - value
      properties:
        enabled:
          type: boolean
          description: Whether the DNS record should be enabled
          default: true
          example: true
        key:
          type: string
          description: DNS record name (hostname or domain)
          example: "api.example.com"
        record_type:
          type: string
          description: DNS record type
          enum:
            - A
            - AAAA
            - CNAME
            - MX
            - NS
            - SRV
            - TXT
          example: A
        value:
          type: string
          description: DNS record value (IP address, target hostname, etc.)
          example: 192.168.1.100
        ttl:
          type: integer
          description: Time to live in seconds (0 = default)
          default: 0
          example: 0
        priority:
          type: integer
          description: Priority for MX and SRV records
          example: 10
        weight:
          type: integer
          description: Weight for SRV records
          example: 5
        port:
          type: integer
          description: Port number for SRV records
          example: 443

    # Firewall Policies
    FirewallPolicy:
      type: object
      required:
        - _id
        - action
        - enabled
        - name
      properties:
        _id:
          type: string
          description: Unique identifier for the firewall policy
          example: 68a496708e604379be63f81368a496708e604379be63f8132147483647
        action:
          type: string
          description: Action to take when traffic matches this policy
          enum:
            - ALLOW
            - DROP
            - REJECT
          example: ALLOW
        enabled:
          type: boolean
          description: Whether the policy is enabled
          example: true
        name:
          type: string
          description: Name of the firewall policy
          example: Allow All Traffic
        predefined:
          type: boolean
          description: Whether this is a predefined system policy (cannot be modified)
          example: true
        index:
          type: integer
          description: Priority index of the policy
          example: 2147483647
        protocol:
          type: string
          description: Protocol to match
          example: all
        logging:
          type: boolean
          description: Whether to log matching traffic
          example: false
        ip_version:
          type: string
          description: IP version to match
          enum:
            - IPV4
            - IPV6
            - BOTH
          example: BOTH
        source:
          type: object
          description: Source matching configuration
          additionalProperties: true
        destination:
          type: object
          description: Destination matching configuration
          additionalProperties: true
        schedule:
          type: object
          description: Schedule configuration
          additionalProperties: true

    FirewallPolicyInput:
      type: object
      required:
        - action
        - enabled
        - name
      properties:
        action:
          type: string
          description: Action to take when traffic matches this policy
          enum:
            - ALLOW
            - DROP
            - REJECT
          example: ALLOW
        enabled:
          type: boolean
          description: Whether the policy is enabled
          example: true
        name:
          type: string
          description: Name of the firewall policy
          example: My Custom Policy
        protocol:
          type: string
          description: Protocol to match
          example: all
        logging:
          type: boolean
          description: Whether to log matching traffic
          default: false
          example: false
        ip_version:
          type: string
          description: IP version to match
          enum:
            - IPV4
            - IPV6
            - BOTH
          default: BOTH
          example: BOTH

    # Traffic Rules
    TrafficRule:
      type: object
      required:
        - _id
        - enabled
        - matching_target
      properties:
        _id:
          type: string
          description: Unique identifier for the traffic rule
          example: 507f1f77bcf86cd799439011
        enabled:
          type: boolean
          description: Whether the traffic rule is enabled
          example: true
        description:
          type: string
          description: User-provided description of the rule
          example: Limit streaming bandwidth
        action:
          type: string
          description: Action to apply (e.g., bandwidth limit, block)
          example: BLOCK
        matching_target:
          type: string
          description: What this rule matches against
          enum:
            - CLIENT
            - NETWORK
            - INTERNET
            - REGION
          example: INTERNET
        app_category_ids:
          type: array
          description: List of application category IDs to match
          items:
            type: string
        app_ids:
          type: array
          description: List of application IDs to match
          items:
            type: string
        domains:
          type: array
          description: List of domains to match
          items:
            type: string
        target_devices:
          type: array
          description: Devices affected by this rule
          items:
            type: object
            additionalProperties: true
        bandwidth_limit:
          type: object
          description: Bandwidth limiting configuration
          additionalProperties: true
        schedule:
          type: object
          description: Schedule configuration
          additionalProperties: true

    TrafficRuleInput:
      type: object
      required:
        - enabled
        - matching_target
      properties:
        enabled:
          type: boolean
          description: Whether the traffic rule is enabled
          example: true
        description:
          type: string
          description: User-provided description of the rule
          example: Limit streaming bandwidth
        action:
          type: string
          description: Action to apply
          example: BANDWIDTH_LIMIT
        matching_target:
          type: string
          description: What this rule matches against
          enum:
            - CLIENT
            - NETWORK
            - INTERNET
            - REGION
          example: INTERNET

    # Analytics / Dashboard
    AggregatedDashboard:
      type: object
      description: Aggregated dashboard statistics and analytics
      properties:
        dashboard_meta:
          type: object
          description: Metadata about the dashboard view
          properties:
            start_timestamp:
              type: integer
              description: Start of time range (Unix timestamp ms)
              example: 1762797600000
            end_timestamp:
              type: integer
              description: End of time range (Unix timestamp ms)
              example: 1762881470751
            layout:
              type: string
              description: Dashboard layout type
              example: gateway
            widgets:
              type: array
              description: List of enabled widgets
              items:
                type: string
              example:
                - traffic_identification
                - wifi_technology
                - most_active_clients
        most_active_clients:
          type: object
          description: Most active clients statistics
          properties:
            total_bytes:
              type: integer
              description: Total bytes across all clients
              example: 1070333306
            usage_by_client:
              type: array
              description: Per-client usage statistics
              items:
                type: object
                additionalProperties: true
        wifi_channels:
          type: object
          description: WiFi channel usage information
          properties:
            radio_channels:
              type: array
              description: Channel information per radio
              items:
                type: object
                additionalProperties: true
        wifi_technology:
          type: object
          description: WiFi technology distribution (WiFi 4/5/6/6E)
          properties:
            summary:
              type: array
              description: Technology usage summary
              items:
                type: object
                additionalProperties: true
        most_active_aps:
          type: object
          description: Most active access points
          properties:
            total_bytes:
              type: integer
              description: Total bytes across all APs
              example: 78641476726
            usage_by_ap:
              type: array
              description: Per-AP usage statistics
              items:
                type: object
                additionalProperties: true
        internet:
          type: object
          description: Internet connectivity health
          properties:
            health_history:
              type: array
              description: Historical health data points
              items:
                type: object
                properties:
                  timestamp:
                    type: integer
                    description: Unix timestamp (ms)
                  wan_downtime:
                    type: boolean
                    description: Whether WAN was down
                  high_latency:
                    type: boolean
                    description: Whether latency was high
                  packet_loss:
                    type: boolean
                    description: Whether packet loss occurred
